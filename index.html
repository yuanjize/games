<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç½‘é¡µæ¸¸æˆåˆé›† - åä¸€ä¸ªç²¾å½©æ¸¸æˆ</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#00dbde">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="æ¸¸æˆåˆé›†">
    <meta name="description" content="åä¸€ä¸ªç²¾å¿ƒè®¾è®¡çš„ç½‘é¡µæ¸¸æˆï¼Œçº¯åŸç”ŸJavaScriptå®ç°ï¼Œæ”¯æŒæ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡">
    <meta name="keywords" content="ç½‘é¡µæ¸¸æˆ,åœ¨çº¿æ¸¸æˆ,å…è´¹æ¸¸æˆ,HTML5æ¸¸æˆ,JavaScriptæ¸¸æˆ">
    <meta name="author" content="Game Collection">
    <meta name="robots" content="index, follow">
    <meta property="og:title" content="ç½‘é¡µæ¸¸æˆåˆé›†">
    <meta property="og:description" content="åä¸€ä¸ªç²¾å¿ƒè®¾è®¡çš„ç½‘é¡µæ¸¸æˆ">
    <meta property="og:type" content="website">
    <!-- å…³é”®CSSé¢„åŠ è½½ -->
    <link rel="preload" href="style.css" as="style">
    <link rel="preload" href="shared-styles.css" as="style">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="shared-styles.css">
    <!-- Font Awesomeå»¶è¿ŸåŠ è½½ -->
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"></noscript>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ®</text></svg>">
</head>
<body>
    <!-- PWA å®‰è£…æç¤ºæ¨ªå¹… -->
    <div class="pwa-install-banner" id="pwa-banner">
        <div class="banner-content">
            <div class="banner-icon">ğŸ®</div>
            <div class="banner-text">
                <div class="banner-title">å®‰è£…æ¸¸æˆåˆé›†</div>
                <div class="banner-description">æ·»åŠ åˆ°ä¸»å±å¹•ï¼Œè·å¾—æ›´å¥½çš„ä½“éªŒ</div>
            </div>
            <button class="banner-close" id="banner-close" aria-label="å…³é—­æç¤º">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <button class="banner-install" id="banner-install">
            <i class="fas fa-download"></i> å®‰è£…
        </button>
    </div>

    <!-- å¸ƒå±€åˆ‡æ¢æŒ‰é’® -->
    <button class="layout-toggle" id="layout-toggle" aria-label="åˆ‡æ¢å¸ƒå±€">
        <i class="fas fa-columns"></i>
    </button>

    <!-- èƒŒæ™¯è£…é¥° -->
    <div class="bg-decoration">
        <div class="floating-shape shape-1"></div>
        <div class="floating-shape shape-2"></div>
        <div class="floating-shape shape-3"></div>
        <div class="floating-shape shape-4"></div>
        <div class="floating-shape shape-5"></div>
    </div>

    <!-- PCç«¯ä¾§è¾¹æ å¸ƒå±€ -->
    <div class="pc-layout" id="pc-layout">
        <!-- å·¦ä¾§è¾¹æ  -->
        <aside class="sidebar sidebar-left">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-gamepad"></i>
                </div>
                <h2>æ¸¸æˆåˆé›†</h2>
            </div>

            <!-- ç»Ÿè®¡é¢æ¿ -->
            <section class="stats-panel" id="stats-panel-pc">
                <div class="stat-card">
                    <div class="stat-icon" style="color: #00dbde;">
                        <i class="fas fa-gamepad"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-value" id="total-games-pc">11</div>
                        <div class="stat-label">æ¸¸æˆæ€»æ•°</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon" style="color: #4cd964;">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-value" id="play-time-pc">0</div>
                        <div class="stat-label">æ¸¸æˆæ—¶é•¿(åˆ†)</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon" style="color: #ff6b6b;">
                        <i class="fas fa-heart"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-value" id="games-played-pc">0</div>
                        <div class="stat-label">å·²æ¸¸ç©</div>
                    </div>
                </div>
            </section>

            <!-- åˆ†ç±»ç­›é€‰ -->
            <nav class="category-filter">
                <h3><i class="fas fa-filter"></i> åˆ†ç±»ç­›é€‰</h3>
                <button class="category-btn active" data-category="all" data-index="0">
                    <i class="fas fa-th"></i> å…¨éƒ¨
                </button>
                <button class="category-btn" data-category="action" data-index="1">
                    <i class="fas fa-bolt"></i> åŠ¨ä½œ
                </button>
                <button class="category-btn" data-category="puzzle" data-index="2">
                    <i class="fas fa-puzzle-piece"></i> ç›Šæ™º
                </button>
                <button class="category-btn" data-category="strategy" data-index="3">
                    <i class="fas fa-chess"></i> ç­–ç•¥
                </button>
                <button class="category-btn" data-category="casual" data-index="4">
                    <i class="fas fa-coffee"></i> ä¼‘é—²
                </button>
            </nav>

            <!-- æœ€è¿‘æ¸¸ç© -->
            <section class="recent-games" id="recent-games-pc" style="display: none;">
                <h3><i class="fas fa-history"></i> æœ€è¿‘æ¸¸ç©</h3>
                <div class="recent-list" id="recent-list-pc"></div>
            </section>
        </aside>

        <!-- ä¸­å¤®ä¸»å†…å®¹åŒº -->
        <main class="main-content">
            <!-- æœç´¢æ¡† -->
            <section class="search-section">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="search-input-pc" placeholder="æœç´¢æ¸¸æˆ..." aria-label="æœç´¢æ¸¸æˆ">
                </div>
            </section>

            <!-- æ¸¸æˆç½‘æ ¼ -->
            <section class="games-grid" id="games-container-pc">
                <!-- æ¸¸æˆå¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
            </section>

            <!-- é¡µè„š -->
            <footer>
                <div class="footer-content">
                    <p>Â© 2025 ç½‘é¡µæ¸¸æˆåˆé›† | ä½¿ç”¨çº¯åŸç”ŸHTMLã€CSSå’ŒJavaScriptå¼€å‘</p>
                    <p>æ‰€æœ‰æ¸¸æˆå‡æ”¯æŒæ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡</p>
                    <p class="version-info">ç‰ˆæœ¬: <span id="app-version-pc">1.0.2</span></p>
                    <div class="footer-links">
                        <a href="#" id="about-link-pc"><i class="fas fa-info-circle"></i> å…³äº</a>
                        <a href="https://github.com" target="_blank" rel="noopener">
                            <i class="fab fa-github"></i> GitHub
                        </a>
                    </div>
                </div>
            </footer>
        </main>

        <!-- å³ä¾§é¢„è§ˆé¢æ¿ -->
        <aside class="sidebar sidebar-right">
            <div class="preview-panel" id="sidebar-preview-panel">
                <div class="preview-header panel-header">
                    <h3><i class="fas fa-eye"></i> æ¸¸æˆé¢„è§ˆ</h3>
                    <p class="preview-hint">æ‚¬åœæ¸¸æˆå¡ç‰‡æŸ¥çœ‹è¯¦æƒ…</p>
                </div>
                <div class="preview-content" id="sidebar-preview-content">
                    <div class="preview-placeholder">
                        <i class="fas fa-gamepad"></i>
                        <p>å°†é¼ æ ‡æ‚¬åœåœ¨æ¸¸æˆä¸Š<br>æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯</p>
                    </div>
                </div>
            </div>

            <!-- æ¸¸æˆç»Ÿè®¡å°éƒ¨ä»¶ -->
            <div class="sidebar-widget">
                <h4><i class="fas fa-chart-bar"></i> æ¸¸æˆåˆ†å¸ƒ</h4>
                <div class="category-stats">
                    <div class="category-stat-item">
                        <span class="stat-label"><i class="fas fa-bolt" style="color: #ff6b6b;"></i> åŠ¨ä½œ</span>
                        <span class="stat-value">5</span>
                    </div>
                    <div class="category-stat-item">
                        <span class="stat-label"><i class="fas fa-puzzle-piece" style="color: #4cd964;"></i> ç›Šæ™º</span>
                        <span class="stat-value">2</span>
                    </div>
                    <div class="category-stat-item">
                        <span class="stat-label"><i class="fas fa-chess" style="color: #ffd166;"></i> ç­–ç•¥</span>
                        <span class="stat-value">2</span>
                    </div>
                    <div class="category-stat-item">
                        <span class="stat-label"><i class="fas fa-coffee" style="color: #06d6a0;"></i> ä¼‘é—²</span>
                        <span class="stat-value">2</span>
                    </div>
                </div>
            </div>

            <!-- å¿«æ·æ“ä½œ -->
            <div class="sidebar-widget">
                <h4><i class="fas fa-bolt"></i> å¿«æ·æ“ä½œ</h4>
                <div class="quick-actions">
                    <button class="quick-action-btn" id="scroll-top">
                        <i class="fas fa-arrow-up"></i> è¿”å›é¡¶éƒ¨
                    </button>
                    <button class="quick-action-btn" id="refresh-games">
                        <i class="fas fa-sync-alt"></i> åˆ·æ–°åˆ—è¡¨
                    </button>
                </div>
            </div>
        </aside>
    </div>

    <!-- ç§»åŠ¨ç«¯/åŸå§‹å¸ƒå±€ -->
    <div class="mobile-layout" id="mobile-layout">
        <div class="container">
            <!-- ç§»åŠ¨ç«¯å…¨æ–°å¤´éƒ¨è®¾è®¡ -->
            <div class="mobile-hero">
                <div class="mobile-hero-content">
                    <div class="mobile-hero-logo">
                        <i class="fas fa-gamepad"></i>
                    </div>
                    <h1 class="mobile-hero-title">ç½‘é¡µæ¸¸æˆåˆé›†</h1>
                    <p class="mobile-hero-subtitle">åä¸€ä¸ªç²¾å¿ƒè®¾è®¡çš„ç½‘é¡µæ¸¸æˆï¼Œçº¯åŸç”ŸJavaScriptå®ç°</p>
                </div>
            </div>

            <!-- åŸå¤´éƒ¨(åœ¨ç§»åŠ¨ç«¯éšè—) -->
            <header class="main-header">
                <div class="header-content">
                    <div class="logo">
                        <i class="fas fa-gamepad"></i>
                    </div>
                    <div class="header-text">
                        <h1>ç½‘é¡µæ¸¸æˆåˆé›†</h1>
                        <p class="subtitle">åä¸€ä¸ªç²¾å¿ƒè®¾è®¡çš„ç½‘é¡µæ¸¸æˆï¼Œçº¯åŸç”ŸJavaScriptå®ç°</p>
                    </div>
                </div>
                <div class="header-actions">
                    <button class="theme-toggle" id="theme-toggle" aria-label="åˆ‡æ¢ä¸»é¢˜" title="åˆ‡æ¢ä¸»é¢˜ (T)">
                        <i class="fas fa-moon" aria-hidden="true"></i>
                    </button>
                    <button class="shortcuts-help-btn" id="shortcuts-help-btn" aria-label="å¿«æ·é”®å¸®åŠ©" title="å¿«æ·é”®å¸®åŠ© (?)">
                        <i class="fas fa-keyboard"></i>
                    </button>
                </div>
            </header>

            <!-- ç»Ÿè®¡é¢æ¿ -->
            <section class="stats-panel" id="stats-panel">
                <div class="stat-card">
                    <div class="stat-icon" style="color: #00dbde;">
                        <i class="fas fa-gamepad"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-value" id="total-games">11</div>
                        <div class="stat-label">æ¸¸æˆæ€»æ•°</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon" style="color: #4cd964;">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-value" id="play-time">0</div>
                        <div class="stat-label">æ¸¸æˆæ—¶é•¿(åˆ†)</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon" style="color: #ff6b6b;">
                        <i class="fas fa-heart"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-value" id="games-played">0</div>
                        <div class="stat-label">å·²æ¸¸ç©</div>
                    </div>
                </div>
            </section>

            <!-- åˆ†ç±»æ ‡ç­¾ -->
            <section class="category-filter" id="category-filter">
                <button class="category-btn active" data-category="all" data-index="0">
                    <span class="category-key">1</span>
                    <i class="fas fa-th"></i> å…¨éƒ¨
                </button>
                <button class="category-btn" data-category="action" data-index="1">
                    <span class="category-key">2</span>
                    <i class="fas fa-bolt"></i> åŠ¨ä½œ
                </button>
                <button class="category-btn" data-category="puzzle" data-index="2">
                    <span class="category-key">3</span>
                    <i class="fas fa-puzzle-piece"></i> ç›Šæ™º
                </button>
                <button class="category-btn" data-category="strategy" data-index="3">
                    <span class="category-key">4</span>
                    <i class="fas fa-chess"></i> ç­–ç•¥
                </button>
                <button class="category-btn" data-category="casual" data-index="4">
                    <span class="category-key">5</span>
                    <i class="fas fa-coffee"></i> ä¼‘é—²
                </button>
            </section>

            <!-- æœç´¢æ¡† -->
            <section class="search-section">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="search-input" placeholder="æœç´¢æ¸¸æˆ... (æŒ‰ / å¿«é€Ÿèšç„¦)" aria-label="æœç´¢æ¸¸æˆ">
                </div>
            </section>

            <!-- æ¸¸æˆç½‘æ ¼ -->
            <section class="games-grid" id="games-container">
                <!-- æ¸¸æˆå¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
            </section>

            <!-- æœ€è¿‘æ¸¸ç© -->
            <section class="recent-games" id="recent-games" style="display: none;">
                <h2><i class="fas fa-history"></i> æœ€è¿‘æ¸¸ç©</h2>
                <div class="recent-list" id="recent-list"></div>
            </section>

            <!-- é¡µè„š -->
            <footer>
                <div class="footer-content">
                    <p>Â© 2025 ç½‘é¡µæ¸¸æˆåˆé›† | ä½¿ç”¨çº¯åŸç”ŸHTMLã€CSSå’ŒJavaScriptå¼€å‘</p>
                    <p>æ‰€æœ‰æ¸¸æˆå‡æ”¯æŒæ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡</p>
                    <p class="version-info">ç‰ˆæœ¬: <span id="app-version">1.0.2</span></p>
                    <div class="footer-links">
                        <a href="#" id="about-link"><i class="fas fa-info-circle"></i> å…³äº</a>
                        <a href="https://github.com" target="_blank" rel="noopener">
                            <i class="fab fa-github"></i> GitHub
                        </a>
                    </div>
                </div>
            </footer>
        </div>
    </div>

    <!-- å…³äºæ¨¡æ€æ¡† -->
    <div class="modal" id="about-modal" role="dialog" aria-labelledby="about-title">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="about-title"><i class="fas fa-info-circle"></i> å…³äºæ¸¸æˆåˆé›†</h2>
                <button class="modal-close" aria-label="å…³é—­">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>è¿™æ˜¯ä¸€ä¸ªçº¯åŸç”ŸJavaScriptå¼€å‘çš„ç½‘é¡µæ¸¸æˆåˆé›†ï¼ŒåŒ…å«11ä¸ªä¸åŒç±»å‹çš„æ¸¸æˆã€‚</p>
                <ul>
                    <li><i class="fas fa-check" style="color: #10b981;"></i> æ— éœ€å®‰è£…ä»»ä½•æ’ä»¶</li>
                    <li><i class="fas fa-check" style="color: #10b981;"></i> æ”¯æŒæ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡</li>
                    <li><i class="fas fa-check" style="color: #10b981;"></i> æš—è‰²/äº®è‰²ä¸»é¢˜åˆ‡æ¢</li>
                    <li><i class="fas fa-check" style="color: #10b981;"></i> æœ¬åœ°å­˜å‚¨æ¸¸æˆè¿›åº¦</li>
                    <li><i class="fas fa-check" style="color: #10b981;"></i> å®Œå…¨å…è´¹å¼€æº</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- å¿«æ·é”®å¸®åŠ©é¢æ¿ -->
    <div class="modal shortcuts-modal" id="shortcuts-modal" role="dialog" aria-labelledby="shortcuts-title">
        <div class="modal-content shortcuts-content">
            <div class="modal-header">
                <h2 id="shortcuts-title"><i class="fas fa-keyboard"></i> é”®ç›˜å¿«æ·é”®</h2>
                <button class="modal-close" aria-label="å…³é—­">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body shortcuts-body">
                <div class="shortcuts-section">
                    <h3><i class="fas fa-gamepad"></i> æ¸¸æˆå¿«æ·é”®</h3>
                    <div class="shortcuts-list">
                        <div class="shortcut-item">
                            <div class="shortcut-keys">
                                <kbd>1</kbd> - <kbd>9</kbd>
                            </div>
                            <div class="shortcut-desc">å¿«é€Ÿå¯åŠ¨å¯¹åº”æ¸¸æˆ</div>
                        </div>
                        <div class="shortcut-item">
                            <div class="shortcut-keys">
                                <kbd>Enter</kbd>
                            </div>
                            <div class="shortcut-desc">è¿›å…¥é€‰ä¸­çš„æ¸¸æˆ</div>
                        </div>
                    </div>
                </div>
                <div class="shortcuts-section">
                    <h3><i class="fas fa-filter"></i> ç­›é€‰å¿«æ·é”®</h3>
                    <div class="shortcuts-list">
                        <div class="shortcut-item">
                            <div class="shortcut-keys">
                                <kbd>1</kbd>
                            </div>
                            <div class="shortcut-desc">æ˜¾ç¤ºå…¨éƒ¨æ¸¸æˆ</div>
                        </div>
                        <div class="shortcut-item">
                            <div class="shortcut-keys">
                                <kbd>2</kbd>
                            </div>
                            <div class="shortcut-desc">ç­›é€‰åŠ¨ä½œæ¸¸æˆ</div>
                        </div>
                        <div class="shortcut-item">
                            <div class="shortcut-keys">
                                <kbd>3</kbd>
                            </div>
                            <div class="shortcut-desc">ç­›é€‰ç›Šæ™ºæ¸¸æˆ</div>
                        </div>
                        <div class="shortcut-item">
                            <div class="shortcut-keys">
                                <kbd>4</kbd>
                            </div>
                            <div class="shortcut-desc">ç­›é€‰ç­–ç•¥æ¸¸æˆ</div>
                        </div>
                        <div class="shortcut-item">
                            <div class="shortcut-keys">
                                <kbd>5</kbd>
                            </div>
                            <div class="shortcut-desc">ç­›é€‰ä¼‘é—²æ¸¸æˆ</div>
                        </div>
                        <div class="shortcut-item">
                            <div class="shortcut-keys">
                                <kbd>â†</kbd> <kbd>â†’</kbd>
                            </div>
                            <div class="shortcut-desc">åˆ‡æ¢åˆ†ç±»ç­›é€‰</div>
                        </div>
                    </div>
                </div>
                <div class="shortcuts-section">
                    <h3><i class="fas fa-search"></i> æœç´¢å¿«æ·é”®</h3>
                    <div class="shortcuts-list">
                        <div class="shortcut-item">
                            <div class="shortcut-keys">
                                <kbd>/</kbd>
                            </div>
                            <div class="shortcut-desc">èšç„¦æœç´¢æ¡†</div>
                        </div>
                        <div class="shortcut-item">
                            <div class="shortcut-keys">
                                <kbd>Esc</kbd>
                            </div>
                            <div class="shortcut-desc">é€€å‡ºæœç´¢/å…³é—­é¢æ¿</div>
                        </div>
                    </div>
                </div>
                <div class="shortcuts-section">
                    <h3><i class="fas fa-cog"></i> å…¶ä»–å¿«æ·é”®</h3>
                    <div class="shortcuts-list">
                        <div class="shortcut-item">
                            <div class="shortcut-keys">
                                <kbd>?</kbd>
                            </div>
                            <div class="shortcut-desc">æ‰“å¼€/å…³é—­æ­¤å¸®åŠ©é¢æ¿</div>
                        </div>
                        <div class="shortcut-item">
                            <div class="shortcut-keys">
                                <kbd>T</kbd>
                            </div>
                            <div class="shortcut-desc">åˆ‡æ¢æ˜æš—ä¸»é¢˜</div>
                        </div>
                    </div>
                </div>
                <div class="shortcuts-tip">
                    <i class="fas fa-lightbulb"></i>
                    <span>æç¤ºï¼šæŒ‰ä¸‹æ•°å­—é”®æ—¶ï¼Œå½“æ¸¸æˆæ•°é‡å°‘äº9ä¸ªæ—¶ï¼Œæ•°å­—é”®ç›´æ¥å¯åŠ¨æ¸¸æˆï¼›å½“ç­›é€‰åæ˜¾ç¤ºæ¸¸æˆæ—¶ï¼Œæ•°å­—é”®å¯¹åº”å½“å‰æ˜¾ç¤ºçš„æ¸¸æˆé¡ºåºã€‚</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast é€šçŸ¥å®¹å™¨ -->
    <div class="toast-container" id="toast-container"></div>

    <script>
        // æ¸¸æˆæ•°æ®
        const games = [
            {
                id: 'space-shooter',
                title: 'å¤ªç©ºå°„å‡»',
                description: 'æ§åˆ¶å¤ªç©ºé£èˆ¹èº²é¿é™¨çŸ³å’Œæ•Œäººï¼Œå‘å°„æ¿€å…‰ä¿å«åœ°çƒã€‚ä½¿ç”¨æ–¹å‘é”®æˆ–WASDæ§åˆ¶é£èˆ¹ç§»åŠ¨ï¼Œç©ºæ ¼é”®å‘å°„æ¿€å…‰ã€‚èº²é¿ä¸æ–­æ¥è¢­çš„é™¨çŸ³å’Œæ•Œæœºï¼Œå°½å¯èƒ½è·å¾—æ›´é«˜åˆ†æ•°ã€‚',
                icon: 'fas fa-rocket',
                category: 'action',
                folder: 'space-shooter',
                color: '#00dbde',
                difficulty: 'medium',
                players: 1
            },
            {
                id: 'platform-jumper',
                title: 'å¹³å°è·³è·ƒ',
                description: 'æ§åˆ¶è§’è‰²åœ¨å¹³å°ä¸Šè·³è·ƒï¼Œèº²é¿éšœç¢ï¼Œæ”¶é›†é‡‘å¸ã€‚ä½¿ç”¨æ–¹å‘é”®æˆ–WASDç§»åŠ¨ï¼Œç©ºæ ¼é”®è·³è·ƒã€‚ç²¾å¿ƒè®¾è®¡çš„å…³å¡è€ƒéªŒä½ çš„ååº”èƒ½åŠ›å’Œæ“ä½œæŠ€å·§ã€‚',
                icon: 'fas fa-running',
                category: 'action',
                folder: 'platform-jumper',
                color: '#ff6b6b',
                difficulty: 'hard',
                players: 1
            },
            {
                id: 'fruit-2048',
                title: 'æ°´æœ2048',
                description: 'åˆå¹¶ç›¸åŒæ°´æœè¾¾åˆ°2048ï¼Œæ•°å­—æ¸¸æˆçš„ç”œç¾å˜ä½“ã€‚ä½¿ç”¨æ–¹å‘é”®æ»‘åŠ¨æ°´æœï¼Œç›¸åŒçš„æ°´æœåˆå¹¶å‡çº§ã€‚ä»æ¨±æ¡ƒå¼€å§‹ï¼Œç›®æ ‡åˆæˆä¼ è¯´ä¸­çš„å¤§è¥¿ç“œï¼',
                icon: 'fas fa-apple-alt',
                category: 'puzzle',
                folder: 'fruit-2048',
                color: '#4cd964',
                difficulty: 'medium',
                players: 1
            },
            {
                id: 'memory-cards',
                title: 'è®°å¿†ç¿»ç‰Œ',
                description: 'ç¿»è½¬å¡ç‰‡åŒ¹é…ç›¸åŒå›¾æ¡ˆï¼Œæµ‹è¯•ä½ çš„è®°å¿†åŠ›ã€‚ç‚¹å‡»å¡ç‰‡ç¿»å¼€ï¼Œå¯»æ‰¾ç›¸åŒçš„å›¾æ¡ˆè¿›è¡Œé…å¯¹ã€‚ç”¨æœ€å°‘çš„æ­¥æ•°å®Œæˆæ‰€æœ‰é…å¯¹æŒ‘æˆ˜ï¼',
                icon: 'fas fa-brain',
                category: 'puzzle',
                folder: 'memory-cards',
                color: '#ffd166',
                difficulty: 'easy',
                players: 1
            },
            {
                id: 'snake-game',
                title: 'è´ªåƒè›‡',
                description: 'ç»å…¸è´ªåƒè›‡æ¸¸æˆï¼Œæ§åˆ¶è›‡åƒé£Ÿç‰©é•¿å¤§ï¼Œé¿å…æ’å¢™ã€‚ä½¿ç”¨æ–¹å‘é”®æ§åˆ¶è›‡çš„ç§»åŠ¨æ–¹å‘ï¼Œåƒæ‰é£Ÿç‰©åè›‡ä¼šå˜é•¿ã€‚ä¸è¦æ’åˆ°å¢™å£æˆ–è‡ªå·±çš„èº«ä½“ï¼',
                icon: 'fas fa-staff-snake',
                category: 'casual',
                folder: 'snake-game',
                color: '#06d6a0',
                difficulty: 'easy',
                players: 1
            },
            {
                id: 'brick-breaker',
                title: 'æ‰“ç –å—',
                description: 'ç”¨æŒ¡æ¿åå¼¹çƒæ‰“ç¢ç –å—ï¼ŒæŒ‘æˆ˜é«˜åˆ†ã€‚ç§»åŠ¨æŒ¡æ¿æ¥ä½å°çƒï¼Œåå¼¹å‡»ç¢æ‰€æœ‰ç –å—ã€‚æœ‰äº›ç –å—éœ€è¦å¤šæ¬¡å‡»æ‰“æ‰èƒ½æ¶ˆé™¤ï¼Œå°å¿ƒä¸è¦è®©çƒæ‰è½ï¼',
                icon: 'fas fa-table-tennis-paddle-ball',
                category: 'action',
                folder: 'brick-breaker',
                color: '#118ab2',
                difficulty: 'medium',
                players: 1
            },
            {
                id: 'tic-tac-toe',
                title: 'äº•å­—æ£‹AI',
                description: 'ä¸æ™ºèƒ½AIå¯¹æˆ˜äº•å­—æ£‹ï¼Œä½ èƒ½æˆ˜èƒœç”µè„‘å—ï¼Ÿç»å…¸çš„äº•å­—æ£‹æ¸¸æˆï¼ŒAIé‡‡ç”¨minimaxç®—æ³•ï¼Œå‡ ä¹ä¸å¯æˆ˜èƒœã€‚è¯•è¯•çœ‹èƒ½å¦è‡³å°‘æ‰“ä¸ªå¹³å±€ï¼',
                icon: 'fas fa-xmarks-lines',
                category: 'strategy',
                folder: 'tic-tac-toe',
                color: '#ef476f',
                difficulty: 'easy',
                players: 1
            },
            {
                id: 'minesweeper',
                title: 'æ‰«é›·æ¸¸æˆ',
                description: 'ç»å…¸æ‰«é›·æ¸¸æˆçš„ç½‘é¡µç‰ˆï¼Œå°å¿ƒåœ°é›·ï¼ç‚¹å‡»æ ¼å­æ­å¼€ï¼Œæ•°å­—è¡¨ç¤ºå‘¨å›´åœ°é›·æ•°é‡ã€‚å³é”®æ ‡è®°åœ°é›·ï¼Œæ‰¾å‡ºæ‰€æœ‰å®‰å…¨æ ¼å­å³å¯è·èƒœã€‚',
                icon: 'fas fa-bomb',
                category: 'strategy',
                folder: 'minesweeper',
                color: '#ff9e00',
                difficulty: 'medium',
                players: 1
            },
            {
                id: 'typing-test',
                title: 'æ‰“å­—é€Ÿåº¦æµ‹è¯•',
                description: 'æµ‹è¯•ä½ çš„æ‰“å­—é€Ÿåº¦å’Œå‡†ç¡®ç‡ï¼Œæå‡é”®ç›˜æŠ€èƒ½ã€‚å±å¹•ä¸Šä¼šå‡ºç°éšæœºæ–‡å­—ï¼Œå°½å¯èƒ½å¿«é€Ÿå‡†ç¡®åœ°è¾“å…¥ã€‚å®æ—¶æ˜¾ç¤ºWPMï¼ˆæ¯åˆ†é’Ÿå­—æ•°ï¼‰å’Œå‡†ç¡®ç‡ã€‚',
                icon: 'fas fa-keyboard',
                category: 'casual',
                folder: 'typing-test',
                color: '#9d4edd',
                difficulty: 'easy',
                players: 1
            },
            {
                id: 'physics-pinball',
                title: 'ç‰©ç†å¼¹çƒ',
                description: 'åŸºäºç‰©ç†å¼•æ“çš„å¼¹çƒæ¸¸æˆï¼Œæ§åˆ¶æŒ¡æ¿å¼¹è·³å°çƒã€‚ä½¿ç”¨å·¦å³æ–¹å‘é”®æ§åˆ¶æŒ¡æ¿ï¼Œè®©å°çƒåœ¨å°ä¸Šå¼¹è·³å¾—åˆ†ã€‚åˆ©ç”¨ç‰©ç†å¼•æ“çš„çœŸå®å¼¹å°„æ•ˆæœè·å¾—æ›´é«˜åˆ†æ•°ï¼',
                icon: 'fas fa-basketball',
                category: 'action',
                folder: 'physics-pinball',
                color: '#ff9e00',
                difficulty: 'hard',
                players: 1
            },
            {
                id: 'down-100-floors',
                title: 'æ˜¯ç”·äººå°±ä¸‹ä¸€ç™¾å±‚',
                description: 'ç»å…¸ä¸‹è½é—¯å…³æ¸¸æˆï¼Œéšæœºç”Ÿæˆ100å±‚å…³å¡æŒ‘æˆ˜ã€‚æ§åˆ¶è§’è‰²é¿å¼€çº¢è‰²é™·é˜±ï¼Œé€šè¿‡ç¼ºå£å¿«é€Ÿä¸‹é™ã€‚ä½¿ç”¨æ–¹å‘é”®å·¦å³ç§»åŠ¨ï¼Œâ†“é”®åŠ é€Ÿä¸‹è½ï¼Œç©ºæ ¼é”®æš‚åœã€‚è€ƒéªŒååº”é€Ÿåº¦å’Œè€å¿ƒï¼',
                icon: 'fas fa-angles-down',
                category: 'action',
                folder: 'down-100-floors',
                color: '#38bdf8',
                difficulty: 'hard',
                players: 1
            }
        ];

        // ç»Ÿè®¡æ•°æ®
        let stats = JSON.parse(localStorage.getItem('gameHubStats')) || {
            totalGamesPlayed: 0,
            totalPlayTime: 0,
            recentlyPlayed: [],
            gameStats: {}
        };

        // å¸ƒå±€æ¨¡å¼
        let currentLayout = localStorage.getItem('gameHub-layout') || 'auto';
        let currentCategory = 'all';
        let selectedGameIndex = -1;
        let currentFilteredGames = [...games];

        // ==================== å¸ƒå±€åˆ‡æ¢åŠŸèƒ½ ====================
        function initLayoutToggle() {
            const layoutToggle = document.getElementById('layout-toggle');
            const pcLayout = document.getElementById('pc-layout');
            const mobileLayout = document.getElementById('mobile-layout');

            function updateLayout() {
                const screenWidth = window.innerWidth;
                let showPC = false;

                if (currentLayout === 'pc') {
                    showPC = true;
                } else if (currentLayout === 'mobile') {
                    showPC = false;
                } else {
                    showPC = screenWidth >= 1200;
                }

                if (showPC) {
                    pcLayout.style.display = 'flex';
                    mobileLayout.style.display = 'none';
                    layoutToggle.innerHTML = '<i class="fas fa-mobile-alt"></i>';
                    layoutToggle.title = 'åˆ‡æ¢åˆ°ç§»åŠ¨ç«¯å¸ƒå±€';
                    // æ¸²æŸ“PCå¸ƒå±€çš„æ¸¸æˆ
                    renderGames(currentCategory === 'all' ? games : games.filter(g => g.category === currentCategory), 'games-container-pc');
                } else {
                    pcLayout.style.display = 'none';
                    mobileLayout.style.display = 'block';
                    layoutToggle.innerHTML = '<i class="fas fa-columns"></i>';
                    layoutToggle.title = 'åˆ‡æ¢åˆ°PCç«¯å¸ƒå±€';
                    // æ¸²æŸ“ç§»åŠ¨ç«¯å¸ƒå±€çš„æ¸¸æˆ
                    renderGames(currentCategory === 'all' ? games : games.filter(g => g.category === currentCategory), 'games-container');
                }
            }

            layoutToggle.addEventListener('click', () => {
                if (currentLayout === 'auto') {
                    currentLayout = window.innerWidth >= 1200 ? 'mobile' : 'pc';
                } else if (currentLayout === 'pc') {
                    currentLayout = 'mobile';
                } else {
                    currentLayout = 'pc';
                }
                localStorage.setItem('gameHub-layout', currentLayout);
                updateLayout();
            });

            window.addEventListener('resize', () => {
                if (currentLayout === 'auto') {
                    updateLayout();
                }
            });

            updateLayout();
        }

        // ==================== PCä¾§è¾¹æ é¢„è§ˆåŠŸèƒ½ ====================
        function showSidebarPreview(game) {
            const previewContent = document.getElementById('sidebar-preview-content');
            previewContent.innerHTML = `
                <div class="preview-game">
                    <div class="preview-game-header" style="background: linear-gradient(135deg, ${game.color}22, ${game.color}44);">
                        <div class="preview-game-icon" style="color: ${game.color};">
                            <i class="${game.icon}"></i>
                        </div>
                    </div>
                    <div class="preview-game-body">
                        <h4>${game.title}</h4>
                        <p class="preview-description">${game.description}</p>
                        <div class="preview-stats">
                            <div class="preview-stat">
                                <i class="fas fa-signal"></i>
                                <span>${getDifficultyText(game.difficulty)}</span>
                            </div>
                            <div class="preview-stat">
                                <i class="fas fa-users"></i>
                                <span>${game.players} äºº</span>
                            </div>
                            <div class="preview-stat">
                                <i class="fas fa-tag"></i>
                                <span>${getCategoryText(game.category)}</span>
                            </div>
                        </div>
                        <button class="btn btn-primary preview-play-btn" data-folder="${game.folder}" data-game-id="${game.id}">
                            <i class="fas fa-play"></i> å¼€å§‹æ¸¸æˆ
                        </button>
                    </div>
                </div>
            `;

            previewContent.querySelector('.preview-play-btn').addEventListener('click', (e) => {
                launchGame(game);
            });
        }

        function hideSidebarPreview() {
            const previewContent = document.getElementById('sidebar-preview-content');
            previewContent.innerHTML = `
                <div class="preview-placeholder">
                    <i class="fas fa-gamepad"></i>
                    <p>å°†é¼ æ ‡æ‚¬åœåœ¨æ¸¸æˆä¸Š<br>æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯</p>
                </div>
            `;
        }

        // æ›´æ–°ç»Ÿè®¡æ˜¾ç¤º
        function updateStats() {
            ['games-played', 'play-time'].forEach(id => {
                const el = document.getElementById(id);
                const elPc = document.getElementById(id + '-pc');
                if (el) el.textContent = id === 'games-played' ? stats.totalGamesPlayed : Math.round(stats.totalPlayTime / 60000);
                if (elPc) elPc.textContent = id === 'games-played' ? stats.totalGamesPlayed : Math.round(stats.totalPlayTime / 60000);
            });
        }

        function saveStats() {
            localStorage.setItem('gameHubStats', JSON.stringify(stats));
        }

        function getGameStats(gameId) {
            if (!stats.gameStats) {
                stats.gameStats = {};
            }
            if (!stats.gameStats[gameId]) {
                stats.gameStats[gameId] = {
                    highscore: 0,
                    plays: 0
                };
            }
            return stats.gameStats[gameId];
        }

        // Toast é€šçŸ¥ç³»ç»Ÿ
        function showToast(message, type = 'info') {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;

            const icons = {
                'success': 'fa-check-circle',
                'error': 'fa-exclamation-circle',
                'info': 'fa-info-circle',
                'warning': 'fa-exclamation-triangle'
            };

            toast.innerHTML = `
                <i class="fas ${icons[type] || icons.info}"></i>
                <span>${message}</span>
            `;

            container.appendChild(toast);

            requestAnimationFrame(() => {
                toast.classList.add('show');
            });

            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toast.remove(), 300);
            }, 2000);
        }

        // æ¸²æŸ“æ¸¸æˆå¡ç‰‡
        function renderGames(filteredGames = games, containerId = 'games-container') {
            const container = document.getElementById(containerId);
            if (!container) return;

            container.innerHTML = '';
            currentFilteredGames = filteredGames;
            selectedGameIndex = -1;

            filteredGames.forEach((game, index) => {
                const card = document.createElement('div');
                card.className = 'game-card';
                card.dataset.gameIndex = index;
                card.dataset.gameId = game.id;
                card.style.animationDelay = `${index * 50}ms`;

                const isPcLayout = containerId === 'games-container-pc';
                const shortcutKey = !isPcLayout && index < 9 ? index + 1 : '';

                card.innerHTML = `
                    <div class="game-card-header" style="background: linear-gradient(135deg, ${game.color}22, ${game.color}44);">
                        ${shortcutKey ? `<span class="game-shortcut-key">${shortcutKey}</span>` : ''}
                        <div class="game-icon" style="color: ${game.color};">
                            <i class="${game.icon}"></i>
                        </div>
                        <div class="game-badges">
                            <span class="badge badge-difficulty">${getDifficultyText(game.difficulty)}</span>
                        </div>
                    </div>
                    <div class="game-card-body">
                        <h3 class="game-title">${game.title}</h3>
                        <p class="game-description">${game.description.substring(0, 50)}...</p>
                        <div class="game-meta">
                            <span class="game-category">
                                <i class="fas fa-tag"></i> ${getCategoryText(game.category)}
                            </span>
                        </div>
                    </div>
                    <div class="game-card-footer">
                        <button class="btn btn-primary play-btn" data-folder="${game.folder}" data-game-id="${game.id}">
                            <i class="fas fa-play"></i> å¼€å§‹æ¸¸æˆ
                        </button>
                    </div>
                `;

                // PCå¸ƒå±€çš„æ‚¬åœé¢„è§ˆ
                if (isPcLayout) {
                    card.addEventListener('mouseenter', () => {
                        prefetchGame(game.folder);
                        showSidebarPreview(game);
                    });

                    card.addEventListener('mouseleave', () => {
                        cancelPrefetch(); // å–æ¶ˆæœªå®Œæˆçš„é¢„åŠ è½½
                        hideSidebarPreview();
                    });
                }

                card.querySelector('.play-btn').addEventListener('click', (e) => {
                    e.stopPropagation();
                    launchGame(game);
                });

                if (!isPcLayout) {
                    card.addEventListener('click', (e) => {
                        if (!e.target.closest('.play-btn')) {
                            selectGame(index);
                        }
                    });
                }

                container.appendChild(card);
            });
        }

        function selectGame(index) {
            document.querySelectorAll('.game-card.selected').forEach(card => {
                card.classList.remove('selected');
            });

            selectedGameIndex = index;
            const cards = document.querySelectorAll('.game-card');
            if (cards[index]) {
                cards[index].classList.add('selected');
                cards[index].scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
        }

        function highlightGame(index) {
            const cards = document.querySelectorAll('.game-card');
            cards.forEach(card => card.classList.remove('highlighted'));

            if (cards[index]) {
                cards[index].classList.add('highlighted');
                setTimeout(() => {
                    cards[index].classList.remove('highlighted');
                }, 500);
            }
        }

        function launchGame(game) {
            stats.totalGamesPlayed++;
            stats.recentlyPlayed = stats.recentlyPlayed.filter(g => g !== game.id);
            stats.recentlyPlayed.unshift(game.id);
            stats.recentlyPlayed = stats.recentlyPlayed.slice(0, 5);
            saveStats();
            updateStats();

            showToast(`æ­£åœ¨å¯åŠ¨ ${game.title}...`, 'info');
            showSkeletonScreen();

            setTimeout(() => {
                window.location.href = `./${game.folder}/`;
            }, 300);
        }

        // ==================== é¡µé¢å¯è§æ€§ä¸æ€§èƒ½ä¼˜åŒ– ====================
        let isPageHidden = false;

        // ç›‘å¬é¡µé¢å¯è§æ€§å˜åŒ–
        document.addEventListener('visibilitychange', () => {
            if (document.hidden) {
                // é¡µé¢éšè—æ—¶æš‚åœåŠ¨ç”»å’Œå®šæ—¶å™¨
                isPageHidden = true;
                document.body.classList.add('page-hidden');
                cancelPrefetch(); // å–æ¶ˆå¾…å¤„ç†çš„é¢„åŠ è½½

                // æš‚åœCSSåŠ¨ç”»
                document.querySelectorAll('.floating-shape').forEach(el => {
                    el.style.animationPlayState = 'paused';
                });

                console.log('[æ€§èƒ½] é¡µé¢éšè—ï¼Œæš‚åœæ‰€æœ‰åŠ¨ç”»');
            } else {
                // é¡µé¢å¯è§æ—¶æ¢å¤
                isPageHidden = false;
                document.body.classList.remove('page-hidden');

                // æ¢å¤CSSåŠ¨ç”»
                document.querySelectorAll('.floating-shape').forEach(el => {
                    el.style.animationPlayState = 'running';
                });

                console.log('[æ€§èƒ½] é¡µé¢å¯è§ï¼Œæ¢å¤åŠ¨ç”»');
            }
        });

        // åœ¨é¡µé¢éšè—æ—¶å‡å°‘requestAnimationFrameè°ƒç”¨
        const originalRAF = window.requestAnimationFrame;
        window.requestAnimationFrame = function(callback) {
            if (isPageHidden) {
                // é¡µé¢éšè—æ—¶å»¶è¿Ÿæ‰§è¡Œ
                return setTimeout(() => callback(performance.now()), 1000);
            }
            return originalRAF(callback);
        };

        // ==================== å†…å­˜ç®¡ç† ====================
        // æ¸…ç†æœªä½¿ç”¨çš„äº‹ä»¶ç›‘å¬å™¨å’ŒDOMå¼•ç”¨
        function cleanup() {
            // æ¸…ç†é¢„åŠ è½½ç¼“å­˜ï¼ˆä¿ç•™æœ€è¿‘5ä¸ªï¼‰
            if (prefetchCache.size > 5) {
                const cachedArray = Array.from(prefetchCache);
                cachedArray.slice(0, cachedArray.length - 5).forEach(folder => {
                    prefetchCache.delete(folder);
                });
            }

            // æ¸…ç†æ—§çš„prefetché“¾æ¥ï¼ˆä¿ç•™æœ€è¿‘10ä¸ªï¼‰
            const prefetchLinks = document.querySelectorAll('link[rel="prefetch"]');
            if (prefetchLinks.length > 10) {
                prefetchLinks.forEach((link, index) => {
                    if (index < prefetchLinks.length - 10) {
                        link.remove();
                    }
                });
            }
        }

        // æ¯5åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡å†…å­˜æ¸…ç†
        setInterval(cleanup, 300000);

        // ==================== æ™ºèƒ½æ¸¸æˆé¢„åŠ è½½ ====================
        const prefetchCache = new Set();
        let prefetchTimeout;

        function prefetchGame(folder) {
            if (prefetchCache.has(folder)) return;

            // é˜²æŠ–ï¼šåªåœ¨æ‚¬åœè¶…è¿‡300msæ—¶æ‰é¢„åŠ è½½
            clearTimeout(prefetchTimeout);
            prefetchTimeout = setTimeout(() => {
                if (prefetchCache.has(folder)) return;
                prefetchCache.add(folder);

                // é¢„åŠ è½½æ¸¸æˆç›®å½•çš„èµ„æº
                const resources = [
                    `./${folder}/index.html`,
                    `./${folder}/style.css`,
                    `./${folder}/game.js`
                ].filter(Boolean);

                resources.forEach(resource => {
                    const link = document.createElement('link');
                    link.rel = 'prefetch';
                    link.href = resource;
                    link.as = resource.endsWith('.js') ? 'script' : resource.endsWith('.css') ? 'style' : 'document';
                    document.head.appendChild(link);
                });

                console.log(`[é¢„åŠ è½½] ${folder}`);
            }, 300);
        }

        function cancelPrefetch() {
            clearTimeout(prefetchTimeout);
        }

        function showSkeletonScreen() {
            const skeleton = document.createElement('div');
            skeleton.className = 'skeleton-screen';
            skeleton.innerHTML = `
                <div class="skeleton-content">
                    <div class="skeleton-spinner"></div>
                    <p>æ­£åœ¨åŠ è½½æ¸¸æˆ...</p>
                </div>
            `;
            document.body.appendChild(skeleton);

            setTimeout(() => {
                skeleton.remove();
            }, 3000);
        }

        function getDifficultyText(difficulty) {
            const texts = { easy: 'ç®€å•', medium: 'ä¸­ç­‰', hard: 'å›°éš¾' };
            return texts[difficulty] || difficulty;
        }

        function getCategoryText(category) {
            const texts = { action: 'åŠ¨ä½œ', puzzle: 'ç›Šæ™º', strategy: 'ç­–ç•¥', casual: 'ä¼‘é—²' };
            return texts[category] || category;
        }

        // åˆ†ç±»ç­›é€‰
        function filterByCategory(category) {
            currentCategory = category;
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.category === category) {
                    btn.classList.add('active');
                }
            });

            const filtered = category === 'all' ? games : games.filter(g => g.category === category);
            renderGames(filtered, 'games-container');
            renderGames(filtered, 'games-container-pc');

            const categoryNames = {
                'all': 'å…¨éƒ¨æ¸¸æˆ',
                'action': 'åŠ¨ä½œæ¸¸æˆ',
                'puzzle': 'ç›Šæ™ºæ¸¸æˆ',
                'strategy': 'ç­–ç•¥æ¸¸æˆ',
                'casual': 'ä¼‘é—²æ¸¸æˆ'
            };
            showToast(`å·²ç­›é€‰: ${categoryNames[category]}`, 'success');
        }

        // åˆå§‹åŒ–åˆ†ç±»ç­›é€‰
        function initCategoryFilters() {
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    filterByCategory(btn.dataset.category);
                });
            });
        }

        // æœç´¢åŠŸèƒ½
        function initSearch() {
            const setupSearch = (inputId) => {
                const searchInput = document.getElementById(inputId);
                if (!searchInput) return;

                searchInput.addEventListener('input', () => {
                    const query = searchInput.value.toLowerCase();
                    const filtered = games.filter(g =>
                        g.title.toLowerCase().includes(query) ||
                        g.description.toLowerCase().includes(query)
                    );
                    renderGames(filtered, 'games-container');
                    renderGames(filtered, 'games-container-pc');
                });

                searchInput.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape') {
                        searchInput.value = '';
                        searchInput.blur();
                        renderGames(games);
                        renderGames(games, 'games-container-pc');
                        showToast('å·²æ¸…é™¤æœç´¢', 'info');
                    }
                });
            };

            setupSearch('search-input');
            setupSearch('search-input-pc');
        }

        // ä¸»é¢˜åˆ‡æ¢
        function initThemeToggle() {
            const themeToggle = document.getElementById('theme-toggle');
            const savedTheme = localStorage.getItem('gameHub-theme') || 'dark';
            document.documentElement.setAttribute('data-theme', savedTheme);
            updateThemeIcon(savedTheme);

            function toggleTheme() {
                const currentTheme = document.documentElement.getAttribute('data-theme');
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                document.documentElement.setAttribute('data-theme', newTheme);
                localStorage.setItem('gameHub-theme', newTheme);
                updateThemeIcon(newTheme);
                showToast(`å·²åˆ‡æ¢åˆ°${newTheme === 'dark' ? 'æš—è‰²' : 'äº®è‰²'}ä¸»é¢˜`, 'info');
            }

            themeToggle.addEventListener('click', toggleTheme);

            function updateThemeIcon(theme) {
                themeToggle.querySelector('i').className = theme === 'dark' ? 'fas fa-moon' : 'fas fa-sun';
            }
        }

        // å¿«æ·æ“ä½œæŒ‰é’®
        function initQuickActions() {
            const scrollTopBtn = document.getElementById('scroll-top');
            const refreshBtn = document.getElementById('refresh-games');

            if (scrollTopBtn) {
                scrollTopBtn.addEventListener('click', () => {
                    document.querySelector('.main-content').scrollTo({ top: 0, behavior: 'smooth' });
                });
            }

            if (refreshBtn) {
                refreshBtn.addEventListener('click', () => {
                    const filtered = currentCategory === 'all' ? games : games.filter(g => g.category === currentCategory);
                    renderGames(filtered, 'games-container-pc');
                    showToast('å·²åˆ·æ–°æ¸¸æˆåˆ—è¡¨', 'success');
                });
            }
        }

        // å¿«æ·é”®å¸®åŠ©é¢æ¿
        function initShortcutsModal() {
            const shortcutsModal = document.getElementById('shortcuts-modal');
            const shortcutsHelpBtn = document.getElementById('shortcuts-help-btn');
            const shortcutsCloseBtn = shortcutsModal.querySelector('.modal-close');

            function toggleShortcutsModal() {
                shortcutsModal.classList.toggle('active');
            }

            shortcutsHelpBtn.addEventListener('click', toggleShortcutsModal);
            shortcutsCloseBtn.addEventListener('click', toggleShortcutsModal);

            shortcutsModal.addEventListener('click', (e) => {
                if (e.target === shortcutsModal) {
                    toggleShortcutsModal();
                }
            });
        }

        // å…³äºæ¨¡æ€æ¡†
        function initAboutModal() {
            const setupModal = (linkId) => {
                const aboutLink = document.getElementById(linkId);
                if (!aboutLink) return;

                const aboutModal = document.getElementById('about-modal');
                const aboutCloseBtn = aboutModal.querySelector('.modal-close');

                aboutLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    aboutModal.classList.add('active');
                });

                aboutCloseBtn.addEventListener('click', () => {
                    aboutModal.classList.remove('active');
                });

                aboutModal.addEventListener('click', (e) => {
                    if (e.target === aboutModal) {
                        aboutModal.classList.remove('active');
                    }
                });
            };

            setupModal('about-link');
            setupModal('about-link-pc');
        }

        // é”®ç›˜å¿«æ·é”®ç³»ç»Ÿ
        function initKeyboardShortcuts() {
            document.addEventListener('keydown', (e) => {
                const shortcutsModal = document.getElementById('shortcuts-modal');
                const aboutModal = document.getElementById('about-modal');
                const isInputFocused = document.activeElement.tagName === 'INPUT' ||
                                      document.activeElement.tagName === 'TEXTAREA';

                if (shortcutsModal.classList.contains('active')) {
                    if (e.key === 'Escape') {
                        shortcutsModal.classList.remove('active');
                    }
                    return;
                }

                if (aboutModal.classList.contains('active')) {
                    if (e.key === 'Escape') {
                        aboutModal.classList.remove('active');
                    }
                    return;
                }

                if (isInputFocused) {
                    if (e.key === 'Escape') {
                        const searchInput = document.getElementById('search-input');
                        if (searchInput) {
                            searchInput.value = '';
                            searchInput.blur();
                        }
                        renderGames(games);
                        renderGames(games, 'games-container-pc');
                        showToast('å·²æ¸…é™¤æœç´¢', 'info');
                    }
                    return;
                }

                if (e.key >= '1' && e.key <= '9') {
                    const gameIndex = parseInt(e.key) - 1;
                    if (gameIndex < currentFilteredGames.length) {
                        e.preventDefault();
                        highlightGame(gameIndex);
                        setTimeout(() => {
                            launchGame(currentFilteredGames[gameIndex]);
                        }, 200);
                    }
                }

                if (e.key === 'Enter' && selectedGameIndex >= 0) {
                    e.preventDefault();
                    if (currentFilteredGames[selectedGameIndex]) {
                        launchGame(currentFilteredGames[selectedGameIndex]);
                    }
                }

                if (e.key === '/') {
                    e.preventDefault();
                    const searchInput = document.getElementById('search-input');
                    if (searchInput) searchInput.focus();
                    showToast('å·²èšç„¦æœç´¢æ¡†ï¼Œè¾“å…¥å…³é”®è¯æœç´¢æ¸¸æˆ', 'info');
                }

                if (e.key === '?') {
                    e.preventDefault();
                    shortcutsModal.classList.toggle('active');
                }

                if (e.key === 't' || e.key === 'T') {
                    e.preventDefault();
                    document.getElementById('theme-toggle').click();
                }

                if (e.key === 'Escape') {
                    if (selectedGameIndex >= 0) {
                        selectGame(-1);
                        showToast('å·²å–æ¶ˆé€‰ä¸­', 'info');
                    }
                }
            });
        }

        // PWA å®‰è£…æç¤º
        function initPWAInstall() {
            let deferredPrompt;
            const pwaBanner = document.getElementById('pwa-banner');
            const bannerClose = document.getElementById('banner-close');
            const bannerInstall = document.getElementById('banner-install');

            const isInstalled = localStorage.getItem('pwa-installed');
            if (isInstalled) return;

            const dismissedTime = localStorage.getItem('pwa-banner-dismissed');
            if (dismissedTime) {
                const daysSinceDismissed = (Date.now() - parseInt(dismissedTime)) / (1000 * 60 * 60 * 24);
                if (daysSinceDismissed < 7) return;
            }

            const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
            if (!isMobile) return;

            setTimeout(() => {
                pwaBanner.classList.add('show');
            }, 3000);

            window.addEventListener('beforeinstallprompt', (e) => {
                e.preventDefault();
                deferredPrompt = e;

                setTimeout(() => {
                    const isInstalled = localStorage.getItem('pwa-installed');
                    if (!isInstalled) {
                        pwaBanner.classList.add('show');
                    }
                }, 5000);
            });

            window.addEventListener('appinstalled', () => {
                localStorage.setItem('pwa-installed', 'true');
                pwaBanner.classList.remove('show');
            });

            bannerClose.addEventListener('click', () => {
                pwaBanner.classList.remove('show');
                localStorage.setItem('pwa-banner-dismissed', Date.now().toString());
            });

            bannerInstall.addEventListener('click', async () => {
                if (deferredPrompt) {
                    deferredPrompt.prompt();
                    const { outcome } = await deferredPrompt.userChoice;
                    if (outcome === 'accepted') {
                        localStorage.setItem('pwa-installed', 'true');
                    }
                    deferredPrompt = null;
                } else {
                    showIOSInstallInstructions();
                }
                pwaBanner.classList.remove('show');
            });

            function showIOSInstallInstructions() {
                const modal = document.createElement('div');
                modal.className = 'modal active';
                modal.innerHTML = `
                    <div class="modal-content">
                        <div class="modal-header">
                            <h2><i class="fab fa-apple"></i> å®‰è£…åˆ°ä¸»å±å¹•</h2>
                            <button class="modal-close"><span>&times;</span></button>
                        </div>
                        <div class="modal-body">
                            <ol style="line-height: 2;">
                                <li>ç‚¹å‡»åº•éƒ¨çš„ <i class="fab fa-safari" style="color: #00dbde;"></i> Safari åˆ†äº«æŒ‰é’®</li>
                                <li>å‘ä¸‹æ»šåŠ¨å¹¶æ‰¾åˆ°"æ·»åŠ åˆ°ä¸»å±å¹•"</li>
                                <li>ç‚¹å‡»"æ·»åŠ "æŒ‰é’®</li>
                            </ol>
                        </div>
                    </div>
                `;
                document.body.appendChild(modal);

                modal.querySelector('.modal-close').addEventListener('click', () => {
                    modal.remove();
                });

                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        modal.remove();
                    }
                });
            }
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            // æ˜¾ç¤ºç‰ˆæœ¬å·
            const version = '1.0.2';
            const versionEl = document.getElementById('app-version');
            const versionPcEl = document.getElementById('app-version-pc');
            if (versionEl) versionEl.textContent = version;
            if (versionPcEl) versionPcEl.textContent = version;

            renderGames(games, 'games-container');
            renderGames(games, 'games-container-pc');
            updateStats();
            initLayoutToggle();
            initCategoryFilters();
            initSearch();
            initThemeToggle();
            initQuickActions();
            initShortcutsModal();
            initAboutModal();
            initKeyboardShortcuts();
            initPWAInstall();
        });
    </script>
</body>
</html>
